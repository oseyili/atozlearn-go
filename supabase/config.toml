# =========================================================
# Supabase Configuration
# Project: AtoZlearn-go
# =========================================================

project_id = "aueekqupqooeauvmeszh"

# ---------------------------------------------------------
# API
# ---------------------------------------------------------
[api]
enabled = true
port = 54321
schemas = ["public", "auth", "storage"]
extra_search_path = ["public"]
max_rows = 1000

# ---------------------------------------------------------
# Database
# ---------------------------------------------------------
[db]
port = 54322
shadow_port = 54320
major_version = 15

# ---------------------------------------------------------
# Studio
# ---------------------------------------------------------
[studio]
enabled = true
port = 54323

# ---------------------------------------------------------
# Email testing (disabled)
# ---------------------------------------------------------
[inbucket]
enabled = false

# =========================================================
# EDGE FUNCTIONS â€” SECURITY MODEL
# =========================================================

# ---------------------------------------------------------
# AUTHENTICATED USER FUNCTIONS
# ---------------------------------------------------------

# Create Stripe Checkout Session
# Requires logged-in user
[functions.create-checkout]
verify_jwt = true

# Cancel a user's subscription (period-end cancel)
[functions.cancel-subscription]
verify_jwt = true

# Restore purchases from Stripe
[functions.restore-purchases]
verify_jwt = true

# ---------------------------------------------------------
# PUBLIC / SERVER-ONLY FUNCTIONS
# ---------------------------------------------------------

# Stripe Webhook (Stripe cannot send JWT)
[functions.stripe-webhook]
verify_jwt = false

# Health check / diagnostics
[functions.health]
verify_jwt = false
